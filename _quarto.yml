project:
  type: website
  output-dir: docs
  render:
    - "*.qmd"
resources:
  - "assets/"
  # - "assets/fonts/**"
  - "assets/fonts/*"
  - "assets/tex/**"
  - "figures/**"

lang: vi

website:
  title: "ZO Math"
  description: "C√πng h·ªçc to√°n theo h∆∞·ªõng 'T·∫ßm nguy√™n v√† T√°i hi·ªán'."
  site-url: "https://zo-math.github.io/"
  site-path: "/" # ƒê·∫£m b·∫£o ƒë∆∞·ªùng d·∫´n g·ªëc l√† /
  favicon: "images/favicon.ico"
  navbar:
    left:
      - href: "index.qmd"
        text: "<i class='bi bi-house-door'></i>"
      - href: "content/about.qmd"
        text: "Gi·ªõi Thi·ªáu"
      - text: "Trung H·ªçc Ph·ªï Th√¥ng"
        menu:
          - text: "To√°n 10"
            href: "content/toan-thpt/toan-10/index.qmd"
          - text: "To√°n 11"
            href: "content/toan-thpt/toan-11/index.qmd"
          - text: "To√°n 12"
            href: "content/toan-thpt/toan-12/index.qmd"

      - href: "content/zo-o/index.qmd"
        text: "ZO ·ªí!"

      - text: "ZO Lab"
        href: "content/zo-lab/index.qmd"

    right:
      - href: "content/shop/index.qmd"
        text: "üõí ZO Shop"
      - href: "content/support/donate.qmd"
        text: "üíñ B·∫£o Tr·ª£"
      - href: "content/contact.qmd"
        text: "‚òéÔ∏è Li√™n H·ªá"

  # sidebar:
  #   style: "docked"
  #   search: true
  #   contents:

  page-footer:
    left: "¬© 2025 ZO Math - T·∫ßm nguy√™n t√°i hi·ªán."
    right: "[Li√™n h·ªá](/content/contact.qmd) | [Facebook](https://facebook.com/zo-math)"

format:
  html:
    theme: default
    title-block-banner: true
    default-image-extension: svg
    css: "assets/css/custom.css"
    include-in-header:
      - text: |
          <script>
            document.addEventListener('DOMContentLoaded', function () {
              const tooltipTriggerList = Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
              const tooltipList = tooltipTriggerList.map(tooltipTriggerEl => {
                const title = tooltipTriggerEl.getAttribute('title');
                if (!title) return null;

                const hasMath = /\\\(.*\\\)|\\\[.*\\\]/.test(title);
                const newTitle = hasMath ? `<span class="mathjax-tooltip">${title}</span>` : title;
                tooltipTriggerEl.setAttribute('data-bs-title', newTitle);
                tooltipTriggerEl.setAttribute('title', '');

                return new bootstrap.Tooltip(tooltipTriggerEl, {
                  html: true,
                  trigger: 'hover focus',
                  boundary: 'viewport',
                  placement: 'auto'
                });
              }).filter(tooltip => tooltip !== null);

              tooltipTriggerList.forEach(tooltipTriggerEl => {
                const tooltipInstance = bootstrap.Tooltip.getInstance(tooltipTriggerEl);
                tooltipTriggerEl.addEventListener('shown.bs.tooltip', function () {
                  // T√¨m ph·∫ßn t·ª≠ .tooltip
                  const tooltip = document.querySelector('.tooltip');
                  if (tooltip) {
                    // Ki·ªÉm tra xem c√≥ .tooltip-arrow kh√¥ng
                    const tooltipArrow = tooltip.querySelector('.tooltip-arrow');
                    if (tooltipArrow) {
                      tooltipArrow.style.background = 'transparent';
                    } else {
                      // N·∫øu kh√¥ng c√≥ .tooltip-arrow, ki·ªÉm tra pseudo-elements c·ªßa .tooltip ho·∫∑c .tooltip-inner
                      const tooltipInner = tooltip.querySelector('.tooltip-inner');
                      if (tooltipInner) {
                        // Th·ª≠ l√†m trong su·ªët pseudo-elements c·ªßa .tooltip
                        tooltip.style.setProperty('--tooltip-before-background', 'transparent', 'important');
                        // Th·ª≠ l√†m trong su·ªët pseudo-elements c·ªßa .tooltip-inner
                        tooltipInner.style.setProperty('--tooltip-inner-before-background', 'transparent', 'important');
                      }
                    }
                  }

                  // X·ª≠ l√Ω MathJax trong tooltip
                  const tooltipEl = document.querySelector('.tooltip-inner');
                  if (!tooltipEl || !tooltipEl.querySelector('.mathjax-tooltip')) return;

                  if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
                    MathJax.typesetPromise([tooltipEl.querySelector('.mathjax-tooltip')]).then(() => {
                      console.log('MathJax rendered successfully in tooltip');
                      if (tooltipInstance) {
                        tooltipInstance.update();
                      }
                    }).catch(err => {
                      console.error('MathJax render error:', err);
                    });
                  } else {
                    console.error('MathJax is not loaded. Ensure MathJax script is included.');
                  }
                });
              });
            });
          </script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js"></script>
    html-math-method: mathjax
    mathjax:
      url: "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
      config: "TeX-MML-AM_CHTML"
    toc: true

  # pdf:
  #   documentclass: article
  #   pdf-engine: lualatex
  #   default-image-extension: pdf
  #   # execute:
  #   #   allow-shell: true
  #   pdf-engine-opts:
  #     - "-shell-escape"
  #     - "-file-line-error"
  #   latex-auto-install: true
  #   latex-auto-mk: true
  #   include-in-header:
  #     - "assets/tex/custom.tex"
  #   # keep-tex: true

execute:
  freeze: auto # Ch·ªâ ch·∫°y l·∫°i code khi file .qmd ho·∫∑c d·ªØ li·ªáu ƒë·∫ßu v√†o thay ƒë·ªïi.
  cache: true # Kh√¥ng render n·∫øu code kh√¥ng ƒë·ªïi
  echo: false # M·∫∑c ƒë·ªãnh ·∫©n code trong to√†n b·ªô t√†i li·ªáu
  warning: false # ·∫®n c·∫£nh b√°o n·∫øu c√≥
  message: false # ·∫®n c√°c th√¥ng b√°o th·ª´a
  tex-math: true
  # dir: .

filters:
  - "assets/lua/custom.lua"
